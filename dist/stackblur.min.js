!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e((t="undefined"!=typeof globalThis?globalThis:t||self).StackBlur={})}(this,(function(t){"use strict";function e(t){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function r(t){throw new TypeError('"'+t+'" is read-only')}var n=[512,512,456,512,328,456,335,512,405,328,271,456,388,335,292,512,454,405,364,328,298,271,496,456,420,388,360,335,312,292,273,512,482,454,428,405,383,364,345,328,312,298,284,271,259,496,475,456,437,420,404,388,374,360,347,335,323,312,302,292,282,273,265,512,497,482,468,454,441,428,417,405,394,383,373,364,354,345,337,328,320,312,305,298,291,284,278,271,265,259,507,496,485,475,465,456,446,437,428,420,412,404,396,388,381,374,367,360,354,347,341,335,329,323,318,312,307,302,297,292,287,282,278,273,269,265,261,512,505,497,489,482,475,468,461,454,447,441,435,428,422,417,411,405,399,394,389,383,378,373,368,364,359,354,350,345,341,337,332,328,324,320,316,312,309,305,301,298,294,291,287,284,281,278,274,271,268,265,262,259,257,507,501,496,491,485,480,475,470,465,460,456,451,446,442,437,433,428,424,420,416,412,408,404,400,396,392,388,385,381,377,374,370,367,363,360,357,354,350,347,344,341,338,335,332,329,326,323,320,318,315,312,310,307,304,302,299,297,294,292,289,287,285,282,280,278,275,273,271,269,267,265,263,261,259],a=[9,11,12,13,13,14,14,15,15,15,15,16,16,16,16,17,17,17,17,17,17,17,18,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24];function o(t,r,n,a,o){if("string"==typeof t&&(t=document.getElementById(t)),!t||"object"!==e(t)||!("getContext"in t))throw new TypeError("Expecting canvas with `getContext` method in processCanvasRGB(A) calls!");var i=t.getContext("2d");try{return i.getImageData(r,n,a,o)}catch(t){throw new Error("unable to access image data: "+t)}}function i(t,e,r,n,a,i){if(!(isNaN(i)||i<1)){i|=0;var g=o(t,e,r,n,a);g=f(g,e,r,n,a,i),t.getContext("2d").putImageData(g,e,r)}}function f(t,e,r,o,i,f){for(var g,l=t.data,u=2*f+1,s=o-1,v=i-1,b=f+1,x=b*(b+1)/2,d=new c,y=d,p=1;p<u;p++)y=y.next=new c,p===b&&(g=y);y.next=d;for(var h=null,m=null,w=0,B=0,C=n[f],E=a[f],I=0;I<i;I++){y=d;for(var S=l[B],N=l[B+1],R=l[B+2],T=l[B+3],j=0;j<b;j++)y.r=S,y.g=N,y.b=R,y.a=T,y=y.next;for(var D=0,G=0,A=0,H=0,O=b*S,W=b*N,k=b*R,M=b*T,_=x*S,L=x*N,P=x*R,q=x*T,z=1;z<b;z++){var F=B+((s<z?s:z)<<2),J=l[F],K=l[F+1],Q=l[F+2],U=l[F+3],V=b-z;_+=(y.r=J)*V,L+=(y.g=K)*V,P+=(y.b=Q)*V,q+=(y.a=U)*V,D+=J,G+=K,A+=Q,H+=U,y=y.next}h=d,m=g;for(var X=0;X<o;X++){var Y=q*C>>>E;if(l[B+3]=Y,0!==Y){var Z=255/Y;l[B]=(_*C>>>E)*Z,l[B+1]=(L*C>>>E)*Z,l[B+2]=(P*C>>>E)*Z}else l[B]=l[B+1]=l[B+2]=0;_-=O,L-=W,P-=k,q-=M,O-=h.r,W-=h.g,k-=h.b,M-=h.a;var $=X+f+1;$=w+($<s?$:s)<<2,_+=D+=h.r=l[$],L+=G+=h.g=l[$+1],P+=A+=h.b=l[$+2],q+=H+=h.a=l[$+3],h=h.next;var tt=m,et=tt.r,rt=tt.g,nt=tt.b,at=tt.a;O+=et,W+=rt,k+=nt,M+=at,D-=et,G-=rt,A-=nt,H-=at,m=m.next,B+=4}w+=o}for(var ot=0;ot<o;ot++){var it=l[B=ot<<2],ft=l[B+1],gt=l[B+2],lt=l[B+3],ct=b*it,ut=b*ft,st=b*gt,vt=b*lt,bt=x*it,xt=x*ft,dt=x*gt,yt=x*lt;y=d;for(var pt=0;pt<b;pt++)y.r=it,y.g=ft,y.b=gt,y.a=lt,y=y.next;for(var ht=o,mt=0,wt=0,Bt=0,Ct=0,Et=1;Et<=f;Et++){B=ht+ot<<2;var It=b-Et;bt+=(y.r=it=l[B])*It,xt+=(y.g=ft=l[B+1])*It,dt+=(y.b=gt=l[B+2])*It,yt+=(y.a=lt=l[B+3])*It,Ct+=it,mt+=ft,wt+=gt,Bt+=lt,y=y.next,Et<v&&(ht+=o)}B=ot,h=d,m=g;for(var St=0;St<i;St++){var Nt=B<<2;l[Nt+3]=lt=yt*C>>>E,lt>0?(lt=255/lt,l[Nt]=(bt*C>>>E)*lt,l[Nt+1]=(xt*C>>>E)*lt,l[Nt+2]=(dt*C>>>E)*lt):l[Nt]=l[Nt+1]=l[Nt+2]=0,bt-=ct,xt-=ut,dt-=st,yt-=vt,ct-=h.r,ut-=h.g,st-=h.b,vt-=h.a,Nt=ot+((Nt=St+b)<v?Nt:v)*o<<2,bt+=Ct+=h.r=l[Nt],xt+=mt+=h.g=l[Nt+1],dt+=wt+=h.b=l[Nt+2],yt+=Bt+=h.a=l[Nt+3],h=h.next,ct+=it=m.r,ut+=ft=m.g,st+=gt=m.b,vt+=lt=m.a,Ct-=it,mt-=ft,wt-=gt,Bt-=lt,m=m.next,B+=o}}return t}function g(t,e,r,n,a,i){if(!(isNaN(i)||i<1)){i|=0;var f=o(t,e,r,n,a);f=l(f,e,r,n,a,i),t.getContext("2d").putImageData(f,e,r)}}function l(t,e,r,o,i,f){for(var g,l=t.data,u=2*f+1,s=o-1,v=i-1,b=f+1,x=b*(b+1)/2,d=new c,y=d,p=1;p<u;p++)y=y.next=new c,p===b&&(g=y);y.next=d;for(var h,m,w=null,B=null,C=n[f],E=a[f],I=0,S=0,N=0;N<i;N++){var R=l[S],T=l[S+1],j=l[S+2],D=b*R,G=b*T,A=b*j,H=x*R,O=x*T,W=x*j;y=d;for(var k=0;k<b;k++)y.r=R,y.g=T,y.b=j,y=y.next;for(var M=0,_=0,L=0,P=1;P<b;P++)h=S+((s<P?s:P)<<2),H+=(y.r=R=l[h])*(m=b-P),O+=(y.g=T=l[h+1])*m,W+=(y.b=j=l[h+2])*m,M+=R,_+=T,L+=j,y=y.next;w=d,B=g;for(var q=0;q<o;q++)l[S]=H*C>>>E,l[S+1]=O*C>>>E,l[S+2]=W*C>>>E,H-=D,O-=G,W-=A,D-=w.r,G-=w.g,A-=w.b,h=I+((h=q+f+1)<s?h:s)<<2,H+=M+=w.r=l[h],O+=_+=w.g=l[h+1],W+=L+=w.b=l[h+2],w=w.next,D+=R=B.r,G+=T=B.g,A+=j=B.b,M-=R,_-=T,L-=j,B=B.next,S+=4;I+=o}for(var z=0;z<o;z++){var F=l[S=z<<2],J=l[S+1],K=l[S+2],Q=b*F,U=b*J,V=b*K,X=x*F,Y=x*J,Z=x*K;y=d;for(var $=0;$<b;$++)y.r=F,y.g=J,y.b=K,y=y.next;for(var tt=0,et=0,rt=0,nt=1,at=o;nt<=f;nt++)S=at+z<<2,X+=(y.r=F=l[S])*(m=b-nt),Y+=(y.g=J=l[S+1])*m,Z+=(y.b=K=l[S+2])*m,tt+=F,et+=J,rt+=K,y=y.next,nt<v&&(at+=o);S=z,w=d,B=g;for(var ot=0;ot<i;ot++)l[h=S<<2]=X*C>>>E,l[h+1]=Y*C>>>E,l[h+2]=Z*C>>>E,X-=Q,Y-=U,Z-=V,Q-=w.r,U-=w.g,V-=w.b,h=z+((h=ot+b)<v?h:v)*o<<2,X+=tt+=w.r=l[h],Y+=et+=w.g=l[h+1],Z+=rt+=w.b=l[h+2],w=w.next,Q+=F=B.r,U+=J=B.g,V+=K=B.b,tt-=F,et-=J,rt-=K,B=B.next,S+=o}return t}var c=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.r=0,this.g=0,this.b=0,this.a=0,this.next=null};t.BlurStack=c,t.canvasRGB=g,t.canvasRGBA=i,t.image=function(t,e,n,a,o,f){if("string"==typeof t&&(t=document.getElementById(t)),t&&("HTMLImageElement"!==Object.prototype.toString.call(t).slice(8,-1)||"naturalWidth"in t)){var l=o?"offset":"natural",c=t[l+"Width"],u=t[l+"Height"];if("ImageBitmap"===Object.prototype.toString.call(t).slice(8,-1)&&(r("w"),c=t.width,r("h"),u=t.height),"string"==typeof e&&(e=document.getElementById(e)),e&&"getContext"in e){f||(e.style.width=c+"px",e.style.height=u+"px"),e.width=c,e.height=u;var s=e.getContext("2d");s.clearRect(0,0,c,u),s.drawImage(t,0,0,t.naturalWidth,t.naturalHeight,0,0,c,u),isNaN(n)||n<1||(a?i(e,0,0,c,u,n):g(e,0,0,c,u,n))}}},t.imageDataRGB=l,t.imageDataRGBA=f,Object.defineProperty(t,"__esModule",{value:!0})}));
//# sourceMappingURL=stackblur.min.js.map
